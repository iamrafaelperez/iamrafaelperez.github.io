{"version":3,"sources":["./src/app/components/backdrop/backdrop.ts","./src/app/components/modal/Modal.ts","./src/app/components/modal/services/modal-controller.service.ts"],"names":[],"mappings":"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","file":"common-es2015.js","sourcesContent":["import { ComponentFactoryResolver, Injector, ApplicationRef } from '@angular/core';\r\nimport { BackdropComponent } from './backdrop.component';\r\n\r\n\r\nexport class Backdrop {\r\n    createBackdrop(\r\n      componentFactoryResolver: ComponentFactoryResolver, \r\n      injector: Injector) {\r\n      \r\n        var backdropRef = componentFactoryResolver\r\n          .resolveComponentFactory(BackdropComponent)\r\n          .create(injector);\r\n  \r\n        return backdropRef;\r\n  \r\n      }\r\n    \r\n}","import { ModalOptions } from './models/ModalOptions';\r\nimport { ComponentRef, ApplicationRef, Injector, ComponentFactoryResolver, EmbeddedViewRef } from '@angular/core';\r\nimport { ModalComponent } from './modal.component';\r\nimport { Backdrop } from '../backdrop/backdrop';\r\nimport { BackdropComponent } from '../backdrop/backdrop.component';\r\nimport { ModalControllerService } from './services/modal-controller.service';\r\n\r\nexport class Modal extends Backdrop {\r\n\r\n  public id: string | number;\r\n\r\n  private _controller: ModalControllerService;\r\n\r\n  private _componentFactoryResolver: ComponentFactoryResolver;\r\n  private _injector: Injector;\r\n  private _applicationRef: ApplicationRef;\r\n\r\n  private _modaOptions: ModalOptions;\r\n\r\n  private _backdropRef: ComponentRef<BackdropComponent>;\r\n  private _modalRef: ComponentRef<ModalComponent>;\r\n  private _componentRef: ComponentRef<any>;\r\n  \r\n  private _modalElement: HTMLElement;\r\n  private _modalContainerElement: HTMLElement;\r\n  private _modalContentElement: HTMLElement;\r\n  private _componentElement: HTMLElement;\r\n  private _backdropElement: HTMLElement;\r\n\r\n  constructor(\r\n    controller: ModalControllerService,\r\n        componentFactoryResolver: ComponentFactoryResolver,\r\n        injector: Injector,\r\n        applicationRef: ApplicationRef,\r\n        modalOptions: ModalOptions) {\r\n        super();\r\n        \r\n        this._controller = controller;\r\n        this._componentFactoryResolver = componentFactoryResolver;\r\n        this._injector = injector;\r\n        this._applicationRef = applicationRef;\r\n        this._modaOptions = modalOptions;\r\n    \r\n    this.createReference();\r\n    this.attachOption();\r\n    this.attachReferenceToApplicationRef();\r\n    this.createElement();\r\n  }\r\n\r\n  open() {\r\n    this.attachModalToDOM();\r\n    if(this._modaOptions.animate) this._modalRef.instance.openAnimate(this._modalContainerElement);\r\n  }\r\n\r\n  close() {\r\n    this._controller.remove(this.id);\r\n    if(this._modaOptions.animate) {\r\n      this._modalRef.instance.closeAnimate(this._modalContainerElement)\r\n        .then(_ => this._modalRef.destroy());\r\n    }\r\n    else this._modalRef.destroy();\r\n  }\r\n\r\n  private createReference() {\r\n    this._modalRef = this._componentFactoryResolver\r\n      .resolveComponentFactory(ModalComponent)\r\n      .create(this._injector);\r\n\r\n    this._componentRef = this._componentFactoryResolver\r\n      .resolveComponentFactory(this._modaOptions.component)\r\n      .create(this._injector);\r\n\r\n    this._backdropRef = this.createBackdrop(this._componentFactoryResolver, this._injector);\r\n\r\n    this._modalRef.instance.closeModal.subscribe(_ => this.close());\r\n    this._backdropRef.instance.closeComponent.subscribe(_ => this.close());\r\n\r\n  }\r\n\r\n  private  attachOption() {\r\n    this._modalRef.instance.header = this._modaOptions.header;\r\n    this._modalRef.instance.footer = this._modaOptions.footer;\r\n    this._modalRef.instance.showHeader = this._modaOptions.showHeader;\r\n    var instance = this._componentRef.instance;\r\n    Object.assign(instance, this._modaOptions.props);\r\n    this.id = this._modaOptions.id;\r\n  }\r\n\r\n  private attachReferenceToApplicationRef() {\r\n    this._applicationRef.attachView(this._modalRef.hostView);\r\n    this._applicationRef.attachView(this._componentRef.hostView);\r\n  }\r\n\r\n  private createElement() {\r\n    this._modalElement = (this._modalRef.hostView as EmbeddedViewRef<any>).rootNodes[0] as HTMLElement;\r\n    this._modalContainerElement = this._modalElement.querySelector('.modal-container');\r\n    this._modalContentElement = this._modalElement.querySelector('.modal-content');\r\n    this._componentElement = (this._componentRef.hostView as EmbeddedViewRef<any>).rootNodes[0] as HTMLElement;\r\n    this._backdropElement = (this._backdropRef.hostView as EmbeddedViewRef<any>).rootNodes[0] as HTMLElement;\r\n  }\r\n\r\n  private attachModalToDOM() {\r\n    this._modalElement.prepend(this._backdropElement);\r\n    this._modalContentElement.appendChild(this._componentElement);\r\n    document.body.appendChild(this._modalElement);\r\n  }\r\n}","import { Injectable, Injector, ApplicationRef, ComponentFactoryResolver, EmbeddedViewRef, ComponentRef } from '@angular/core';\nimport { ModalComponent } from '../modal.component';\nimport { BackdropControllerService } from '../../backdrop/service/backdrop-controller.service';\nimport { ModalOptions } from '../models/ModalOptions';\nimport { BackdropComponent } from '../../backdrop/backdrop.component';\nimport { Modal } from '../Modal';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ModalControllerService {\n\n  private _modals: Modal[] = [];\n\n  constructor(\n    private _componentFactoryResolver: ComponentFactoryResolver,\n    private _injector: Injector,\n    private _applicationRef: ApplicationRef) { }\n\n  ngOnInit() {\n  }\n\n  create(modalOptions: ModalOptions) {\n\n    var controller = this;\n\n    var modal = new Modal(\n      controller,\n      this._componentFactoryResolver, \n      this._injector, \n      this._applicationRef, \n      modalOptions\n    )\n\n    this._modals.push(modal);\n  }\n\n  open(id: string | number) {\n    var modal = this.find(id);\n\n    if(modal) {\n      modal.open();\n    }\n  }\n\n  close(id: string | number) {\n    var modal = this.find(id);\n    this.remove(id);\n\n    if(modal) {\n      modal.close();\n    }\n  }\n\n  find(id: string | number) {\n    return this._modals.filter(modal => modal.id === id)[0];\n  }\n\n  remove(id: string | number) {\n    this._modals = this._modals\n      .filter(modal => modal.id != id);\n  }\n\n}\n"],"sourceRoot":"webpack:///"}